{"ast":null,"code":"var _jsxFileName = \"/Users/erinwu/Downloads/project_kaleidoscope/src/Components/Canvas.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useImperativeHandle, forwardRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Canvas = /*#__PURE__*/_s( /*#__PURE__*/forwardRef(_c = _s((props, ref) => {\n  _s();\n  const {\n    size = 500,\n    brushColor = '#000000',\n    brushSize = 5,\n    backgroundColor = 'pink'\n  } = props;\n  const canvasRef = useRef(null);\n\n  // Use useImperativeHandle to expose the clearCanvas function to the parent component\n  useImperativeHandle(ref, () => ({\n    toDataURL: () => canvasRef.current.toDataURL(),\n    clearCanvas() {\n      const canvas = canvasRef.current;\n      if (canvas) {\n        const context = canvas.getContext('2d');\n        context.clearRect(0, 0, canvas.width, canvas.height); // Clear the canvas\n      }\n    }\n  }));\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    canvas.style.backgroundColor = backgroundColor;\n    const context = canvas.getContext('2d');\n    const centerX = canvas.width / 2;\n    const centerY = canvas.height / 2;\n    let drawing = false;\n    let lastX = 0;\n    let lastY = 0;\n    const startDrawing = e => {\n      const rect = canvas.getBoundingClientRect();\n      lastX = e.clientX - rect.left;\n      lastY = e.clientY - rect.top;\n      drawing = true;\n    };\n    const draw = e => {\n      if (!drawing) return;\n      const rect = canvas.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const y = e.clientY - rect.top;\n      const hue = x / canvas.width * 360;\n      const strokeColor = `hsl(${hue}, 100%, 90%)`;\n      context.lineWidth = brushSize;\n      context.strokeStyle = strokeColor;\n      context.lineCap = 'round';\n\n      // Calculate initial and final points for the drawing\n      const initialPoints = calculateSymmetricalPoints(lastX, lastY, centerX, centerY, brushSize, brushColor, context);\n      const finalPoints = calculateSymmetricalPoints(x, y, centerX, centerY, brushSize, brushColor, context);\n      initialPoints.forEach((start, index) => {\n        const end = finalPoints[index];\n        context.beginPath();\n        context.moveTo(start.x, start.y);\n        context.lineTo(end.x, end.y);\n        context.stroke();\n      });\n      lastX = x;\n      lastY = y;\n    };\n    const stopDrawing = () => {\n      drawing = false;\n    };\n    canvas.addEventListener('mousedown', startDrawing);\n    canvas.addEventListener('mousemove', draw);\n    canvas.addEventListener('mouseup', stopDrawing);\n    canvas.addEventListener('mouseout', stopDrawing);\n    return () => {\n      canvas.removeEventListener('mousedown', startDrawing);\n      canvas.removeEventListener('mousemove', draw);\n      canvas.removeEventListener('mouseup', stopDrawing);\n      canvas.removeEventListener('mouseout', stopDrawing);\n    };\n  }, [brushColor, brushSize, backgroundColor]); // Add brushColor and brushSize as dependencies\n\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    width: size,\n    height: size\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 10\n  }, this);\n}, \"vph9BBCZj/nr8LjzON7i7qbbjZA=\")), \"vph9BBCZj/nr8LjzON7i7qbbjZA=\");\n_c2 = Canvas;\nexport default Canvas;\n\n// Adjusted calculateSymmetricalPoints to take additional arguments\nfunction calculateSymmetricalPoints(x, y, centerX, centerY, brushSize, brushColor, context) {\n  const points = [];\n  const angle = Math.atan2(y - centerY, x - centerX);\n  const dist = Math.sqrt((x - centerX) ** 2 + (y - centerY) ** 2);\n  for (let i = 0; i < 8; i++) {\n    const sectionAngle = Math.PI / 4 * i;\n    const reflectedAngle = 2 * sectionAngle - angle;\n    points.push({\n      x: centerX + dist * Math.cos(angle + sectionAngle),\n      y: centerY + dist * Math.sin(angle + sectionAngle)\n    });\n    points.push({\n      x: centerX + dist * Math.cos(reflectedAngle + sectionAngle),\n      y: centerY + dist * Math.sin(reflectedAngle + sectionAngle)\n    });\n  }\n  return points;\n}\nvar _c, _c2;\n$RefreshReg$(_c, \"Canvas$forwardRef\");\n$RefreshReg$(_c2, \"Canvas\");","map":{"version":3,"names":["React","useRef","useEffect","useImperativeHandle","forwardRef","jsxDEV","_jsxDEV","Canvas","_s","_c","props","ref","size","brushColor","brushSize","backgroundColor","canvasRef","toDataURL","current","clearCanvas","canvas","context","getContext","clearRect","width","height","style","centerX","centerY","drawing","lastX","lastY","startDrawing","e","rect","getBoundingClientRect","clientX","left","clientY","top","draw","x","y","hue","strokeColor","lineWidth","strokeStyle","lineCap","initialPoints","calculateSymmetricalPoints","finalPoints","forEach","start","index","end","beginPath","moveTo","lineTo","stroke","stopDrawing","addEventListener","removeEventListener","fileName","_jsxFileName","lineNumber","columnNumber","_c2","points","angle","Math","atan2","dist","sqrt","i","sectionAngle","PI","reflectedAngle","push","cos","sin","$RefreshReg$"],"sources":["/Users/erinwu/Downloads/project_kaleidoscope/src/Components/Canvas.js"],"sourcesContent":["import React, { useRef, useEffect, useImperativeHandle, forwardRef } from 'react';\n\nconst Canvas = forwardRef((props, ref) => {\n  const { size = 500, brushColor = '#000000', brushSize = 5 , backgroundColor = 'pink' } = props;\n  const canvasRef = useRef(null);\n\n  // Use useImperativeHandle to expose the clearCanvas function to the parent component\n  useImperativeHandle(ref, () => ({\n    toDataURL: () => canvasRef.current.toDataURL(),\n    clearCanvas() {\n      const canvas = canvasRef.current;\n      if (canvas) {\n        const context = canvas.getContext('2d');\n        context.clearRect(0, 0, canvas.width, canvas.height); // Clear the canvas\n      }\n    }\n  }));\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    canvas.style.backgroundColor = backgroundColor; \n    const context = canvas.getContext('2d');\n    const centerX = canvas.width / 2;\n    const centerY = canvas.height / 2;\n    let drawing = false;\n    let lastX = 0;\n    let lastY = 0;\n\n    const startDrawing = (e) => {\n      const rect = canvas.getBoundingClientRect();\n      lastX = e.clientX - rect.left;\n      lastY = e.clientY - rect.top;\n      drawing = true;\n    };\n\n    const draw = (e) => {\n      if (!drawing) return;\n      const rect = canvas.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const y = e.clientY - rect.top;\n\n      const hue = (x / canvas.width) * 360;\n      const strokeColor = `hsl(${hue}, 100%, 90%)`;\n\n      context.lineWidth = brushSize;\n      context.strokeStyle = strokeColor;\n      context.lineCap = 'round';\n\n\n      // Calculate initial and final points for the drawing\n      const initialPoints = calculateSymmetricalPoints(lastX, lastY, centerX, centerY, brushSize, brushColor, context);\n      const finalPoints = calculateSymmetricalPoints(x, y, centerX, centerY, brushSize, brushColor, context);\n\n      initialPoints.forEach((start, index) => {\n        const end = finalPoints[index];\n        context.beginPath();\n        context.moveTo(start.x, start.y);\n        context.lineTo(end.x, end.y);\n        context.stroke();\n      });\n\n      lastX = x;\n      lastY = y;\n    };\n\n    const stopDrawing = () => {\n      drawing = false;\n    };\n\n    canvas.addEventListener('mousedown', startDrawing);\n    canvas.addEventListener('mousemove', draw);\n    canvas.addEventListener('mouseup', stopDrawing);\n    canvas.addEventListener('mouseout', stopDrawing);\n\n    return () => {\n      canvas.removeEventListener('mousedown', startDrawing);\n      canvas.removeEventListener('mousemove', draw);\n      canvas.removeEventListener('mouseup', stopDrawing);\n      canvas.removeEventListener('mouseout', stopDrawing);\n    };\n  }, [brushColor, brushSize, backgroundColor]); // Add brushColor and brushSize as dependencies\n\n  return <canvas ref={canvasRef} width={size} height={size} />;\n});\n\nexport default Canvas;\n\n// Adjusted calculateSymmetricalPoints to take additional arguments\nfunction calculateSymmetricalPoints(x, y, centerX, centerY, brushSize, brushColor, context) {\n  const points = [];\n  const angle = Math.atan2(y - centerY, x - centerX);\n  const dist = Math.sqrt((x - centerX) ** 2 + (y - centerY) ** 2);\n\n  for (let i = 0; i < 8; i++) {\n    const sectionAngle = (Math.PI / 4) * i;\n    const reflectedAngle = 2 * sectionAngle - angle;\n    points.push({\n      x: centerX + dist * Math.cos(angle + sectionAngle),\n      y: centerY + dist * Math.sin(angle + sectionAngle)\n    });\n    points.push({\n      x: centerX + dist * Math.cos(reflectedAngle + sectionAngle),\n      y: centerY + dist * Math.sin(reflectedAngle + sectionAngle)\n    });\n  }\n\n  return points;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}